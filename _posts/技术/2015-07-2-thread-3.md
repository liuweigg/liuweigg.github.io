---
layout: post
title: 多线程-3、ThreadLocal
category: 技术
tags: 多线程
keywords: 
description: 
---

## ThreadLocal ##

ThreadLocal:用于实现线程内的数据共享，即相对于相同的代码程序，多个模块在同一个线程中运行时要共享一份数据，而在另外线程中运行时又共享另一份数据。

	import java.util.Random;


	public class ThreadLocalTest {

		public static ThreadLocal<Integer> tl = new ThreadLocal<Integer>();
		/**
		 * @param args
		 */
		public static void main(String[] args) {
			// TODO Auto-generated method stub
			
			for(int i = 0 ; i < 2 ; i ++){
				new Thread(
						new Runnable(){
	
							public void run() {
								// TODO Auto-generated method stub
								int date = new Random().nextInt();
								tl.set(date);
								System.out.println("MAIN thread ... put date : " + date);
								new A().get();
								new B().get();
							}
							
						}
				).start();
			}
	
		}
		static class A{
			public void get(){
				int date = tl.get();
				System.out.println("A thread ... " + Thread.currentThread().getName() 
						+ " get date : " + date);
			}
		}
	
		static class B{
			public void get(){
				int date = tl.get();
				System.out.println("B thread ... " + Thread.currentThread().getName() 
						+ " get date : " + date);
			}
		}

	}